var newcar=function(t){"use strict";function e(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)}class i{#t=[];#e=[];playOnCar(t){for(const e of this.#t)e.onRegister(t);const e=[...this.#t];e.sort(((t,e)=>t.startFrame-e.startFrame)),t.onUpdate((t=>{for(const i of e)if(!(-1!==i.length&&t>=i.startFrame+i.length)){if(t<i.startFrame)break;i.onDrawFrame(t-i.startFrame,this)}for(const e of this.#e)e.onDrawFrame(t-e.startFrame,this);this.#e=[]}))}addItem(t){return this.#t.push(t),this}animate(t){return this.#e.push(t),this}}class s{#i;#s=[];#o=[];#r;#a=0;#n=0;#h=null;isSuspend=!1;constructor(t,e){return this.#i=t,this.#i.style.backgroundColor="black",this.#i.getContext&&(this.#a=e,this.#h=this.#i.getContext("2d")),this}onUpdate(t){return this.#o?.push(t),this}forStart(t){return this.#r=t,this}pause(t){void 0!==t&&(this.#n=t),this.isSuspend=!0}continue(t){void 0!==t&&(this.#n=t),this.isSuspend=!1}CountFrame(){null!==this.#h&&(this.#r&&this.#r(),setInterval((()=>{if(this.#h?.clearRect(0,0,this.#i.width,this.#i.height),this.isSuspend||(this.#n+=1),this.#o)for(const t of this.#o)t&&t(this.#n);for(const t of this.#s)t.onUpdate(this.#h)}),1e3/this.#a))}linkObject(t){this.#s.push(t)}get fps(){return this.#a}get framePerSecond(){return this.#a}get element(){return this.#i}}class o{#l=[];#d=!1;playOnCar(t){t.onUpdate((e=>{if(this.#d)for(const i of this.#l)e>=i[0].startFrame&&!i[1]&&(i[0].audio.play(),i[0].audio.currentTime=(e-i[0].startFrame)/t.fps,i[1]=!0)}))}addAudio(t){this.#l.push([t,!1])}allow(){this.#d=!0}ban(){this.#d=!1}}const r=(t,e)=>{const i=t.captureStream();return new MediaRecorder(i,e)},a=(t,e)=>{const i=[];t.ondataavailable=t=>{t.data&&t.data.size&&i.push(t.data)},t.onstop=()=>{const t=URL.createObjectURL(new Blob(i,{type:"video/webm"}));e(t)}},n=(t,e,i,s)=>{const o=s-i;t.start(),e.continue(i),setTimeout((()=>{t.stop()}),1e3/e.fps*o)},h=t=>t;function l(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375}const d={easeInBack:function(t){const e=1.70158;return 2.70158*t*t*t-e*t*t},easeInBounce:t=>1-l(1-t),easeInCirc:t=>1-Math.sqrt(1-t**2),easeInCubic:t=>t*t*t,easeInElastic:function(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:-(2**(10*t-10))*Math.sin((10*t-10.75)*e)},easeInExpo:t=>0===t?0:2**(10*t-10),easeInOutBack:function(t){const e=2.5949095;return t<.5?(2*t)**2*(7.189819*t-e)/2:((2*t-2)**2*((e+1)*(2*t-2)+e)+2)/2},easeInOutBounce:t=>t<.5?(1-l(1-2*t))/2:(1+l(2*t-1))/2,easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-(2*t)**2))/2:(Math.sqrt(1-(-2*t+2)**2)+1)/2,easeInOutElastic:function(t){const e=2*Math.PI/4.5;return 0===t?0:1===t?1:t<.5?-(2**(20*t-10))*Math.sin((20*t-11.125)*e)/2:2**(-20*t+10)*Math.sin((20*t-11.125)*e)/2+1},easeInOutCubic:t=>t<.5?4*t*t*t:1-(-2*t+2)**3/2,easeInOutExpo:t=>0===t?0:1===t?1:t<.5?2**(20*t-10)/2:(2-2**(-20*t+10))/2,easeInOutQuad:t=>t<.5?16*t*t*t*t*t:1-(-2*t+2)**5/2,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-(-2*t+2)**4/2,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-(-2*t+2)**5/2,easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInQuad:t=>t*t,easeInQuart:t=>t*t*t*t,easeInQuint:t=>t*t*t*t*t,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutBack:function(t){const e=1.70158;return 1+2.70158*(t-1)**3+e*(t-1)**2},easeOutBounce:l,easeOutCirc:t=>Math.sqrt(1-(t-1)**2),easeOutCubic:t=>1-(1-t)**3,easeOutElastic:function(t){const e=2*Math.PI/3;return 0===t?0:1===t?1:2**(-10*t)*Math.sin((10*t-.75)*e)+1},easeOutExpo:t=>1===t?1:1-2**(-10*t),easeOutQuad:t=>1-(1-t)*(1-t),easeOutQuart:t=>1-(1-t)**4,easeOutQuint:t=>1-(1-t)**5,easeOutSine:t=>Math.sin(t*Math.PI/2),Linear:h};class c{onRegister(t){}}class u{#c;#u;#g;constructor(t,e,i){this.#c=t,this.#u=e,this.#g=i}interpolate(t){return this.#c+this.#g(t)*(this.#u-this.#c)}}const g={Translation:class extends c{#p;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.x,t.bindTo.y],this.#p={length:t.lastsFor??null,start:t.startAt??null,obj:t.bindTo??null,interpolatorx:new u(t.from[0],t.to[0],t.by??h),interpolatory:new u(t.from[1],t.to[1],t.by??h)}}get length(){return this.#p.length}get startFrame(){return this.#p.start}onDrawFrame(t,e){this.#p.obj.x=this.#p.interpolatorx.interpolate((t+1)/this.#p.length),this.#p.obj.y=this.#p.interpolatory.interpolate((t+1)/this.#p.length)}},Rotation:class extends c{#p;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??t.bindTo.rotation,this.#p={start:t.startAt,obj:t.bindTo,interpolator:new u(t.from,t.to,t.by??h),length:t.lastsFor}}onDrawFrame(t,e){this.#p.obj.rotation=this.#p.interpolator.interpolate((t+1)/this.#p.length)}get startFrame(){return this.#p.start}get length(){return this.#p.length}},Scale:class extends c{#p;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.scaleX,t.bindTo.scaleY],this.#p={obj:t.bindTo,interpolatorx:new u(t.from[0],t.to[0],t.by??h),interpolatory:new u(t.from[1],t.to[1],t.by??h),length:t.lastsFor,start:t.startAt}}onDrawFrame(t,e){this.#p.obj.scaleX=this.#p.interpolatorx.interpolate((t+1)/this.#p.length),this.#p.obj.scaleY=this.#p.interpolatory.interpolate((t+1)/this.#p.length)}get startFrame(){return this.#p.start}get length(){return this.#p.length}},Limit:class extends c{#p;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.startVariable,t.bindTo.startVariable],this.#p={length:t.lastsFor-t.startAt,start:t.startAt,obj:t.bindTo,interpolatorstart:new u(t.from[0],t.to[0],t.by??h),interpolatorend:new u(t.from[1],t.to[1],t.by??h)}}onDrawFrame(t,e){this.#p.obj.startVariable=this.#p.interpolatorstart.interpolate((t+1)/this.#p.length),this.#p.obj.endVariable=this.#p.interpolatorend.interpolate((t+1)/this.#p.length)}get startFrame(){return this.#p.start}get length(){return this.#p.length}},AngleCircle:class extends c{#p;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);t.from=t.from??[t.bindTo.startAngle,t.bindTo.endAngle],this.#p={length:t.lastsFor,start:t.startAt,obj:t.bindTo,interpolatorstart:new u(t.from[0],t.to[0],t.by??h),interpolatorend:new u(t.from[1],t.to[1],t.by??h)}}onDrawFrame(t,e){this.#p.obj.startAngle=this.#p.interpolatorstart.interpolate((t+1)/this.#p.length),this.#p.obj.endAngle=this.#p.interpolatorend.interpolate((t+1)/this.#p.length)}get startFrame(){return this.#p.start}get length(){return this.#p.length}},AnimationBuilderItem:c,AxisLength:class extends c{#b;#m;#f;#x;#r;#v;#w;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);this.#b=t.bindTo,this.#v=t.from??[this.#b.axisPositiveXLength,this.#b.axisPositiveYLength,this.#b.axisNegativeXLength,this.#b.axisNegativeYLength],this.#w=t.to,this.#x=t.lastsFor,this.#r=t.startAt,this.#m=new u(this.#v[0],this.#w[0],t.by??h),this.#f=new u(t.from[1],t.to[1],t.by??h)}onDrawFrame(t,e){this.#b.axisPositiveXLength=this.#m.interpolate((t+1)/this.#x),this.#b.axisPositiveYLength=this.#f.interpolate((t+1)/this.#x),this.#b.axisNegativeXLength=this.#m.interpolate((t+1)/this.#x),this.#b.axisNegativeYLength=this.#f.interpolate((t+1)/this.#x)}get startFrame(){return this.#r}get length(){return this.#x}},RectSize:class extends c{#b;#y;#T;#x;#r;#v;#w;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);this.#b=t.bindTo,this.#v=t.from??[this.#b.width,this.#b.length],this.#w=t.to,this.#x=t.lastsFor,this.#r=t.startAt,this.#y=new u(this.#v[0],this.#w[0],t.by??h),this.#T=new u(t.from[1],t.to[1],t.by??h)}onDrawFrame(t,e){this.#b.width=this.#y.interpolate((t+1)/this.#x),this.#b.length=this.#T.interpolate((t+1)/this.#x)}get startFrame(){return this.#r}get length(){return this.#x}},Transparency:class extends c{#b;#g;#x;#r;#v;#w;constructor(t){super();let e="";if(e="startAt",void 0===t.startAt||(e="lastsFor",void 0===t.lastsFor)||(e="to",void 0===t.to)||(e="bindTo",void 0===t.bindTo))throw new Error(`be unset data "${e}"`);this.#b=t.bindTo,this.#v=t.from??this.#b.transparency,this.#w=t.to,this.#x=t.lastsFor,this.#r=t.startAt,this.#g=new u(this.#v,this.#w,t.by??h)}onDrawFrame(t,e){this.#b.transparency=this.#g.interpolate((t+1)/this.#x)}get startFrame(){return this.#r}get length(){return this.#x}}};class p{display=!0;#P=0;#F=0;#A=0;#_=1;#C=1;#L;#X;#Y=[];#j="source-over";#D;constructor(t){this.x=t.x,this.y=t.y,void 0===t.contextX?this.#L=this.#P:this.#L=t.contextX,void 0===t.contextY?this.#X=this.#F:this.#X=t.contextY,void 0!==t.scaleX&&(this.#_=t.scaleX),void 0!==t.scaleY&&(this.#C=t.scaleY),void 0!==t.display&&(this.display=t.display),void 0!==t.rotation&&(this.#A=t.rotation),void 0!==t.operation&&(this.#j=t.operation),void 0!==t.children&&(this.#Y=t.children),this.#D=t.transparency??1}get transparency(){return this.#D}set transparency(t){this.#D=t}onDraw(t,e){return t}onUpdate(t){if(!0===this.display){t.save(),t.translate(this.x,this.y),t.rotate(this.#A),t.scale(this.#_,this.#C),t.globalAlpha=this.#D,t.globalCompositeOperation=this.#j,this.onDraw(t);for(const e of this.#Y)e.onUpdate(t);t.restore()}}hide(){this.display=!1}appear(){this.display=!0}setContextPosition(t,e){return this.#L=t,this.#X=e,this}get children(){return this.#Y}get x(){return this.#P}set x(t){this.#P=t}get y(){return this.#F}set y(t){this.#F=t}set scaleX(t){this.#_=t}get scaleX(){return this.#_}set scaleY(t){this.#C=t}get scaleY(){return this.#C}get contextX(){return this.#L}get contextY(){return this.#X}get rotation(){return this.#A}set rotation(t){this.#A=t}get operation(){return this.#j}set operation(t){this.#j=t}addChildren(...t){for(const e of t)this.#Y.push(e);return this}}const b={Carobj:p,CoordinateSystem:class extends p{#I;#k;#O;#V;#S;#M;#W;constructor(t,e,i,s,o){super(o),this.#I=t,this.#k=e,this.#M=i,this.#W=s,this.#O=o.axisXDirection??"right",this.#V=o.axisYDirection??"top",this.#S=o.color??"white"}get axisNegativeXLength(){return this.#M}set axisNegativeXLength(t){this.#M=t}get axisNegativeYLength(){return this.#W}set axisNegativeYLength(t){this.#W=t}get axisXDirection(){return this.#O}set axisXDirection(t){this.#O=t}get axisYDirection(){return this.#V}set axisYDirection(t){this.#V=t}get axisPositiveYLength(){return this.#k}set axisPositiveYLength(t){this.#k=t}get axisPositiveXLength(){return this.#I}set axisPositiveXLength(t){this.#I=t}onDraw(t){return"left"===this.#O&&t.scale(-1,1),"top"===this.#V&&t.scale(1,-1),t.strokeStyle=`${this.#S}`,t.moveTo(-this.#M,0),t.lineTo(this.#I,0),t.moveTo(this.#I,0),t.lineTo(this.#I-6,6),t.moveTo(this.#I,0),t.lineTo(this.#I-6,-6),t.moveTo(0,-this.#W),t.lineTo(0,this.#k),t.moveTo(0,this.#k),t.lineTo(6,this.#k-6),t.moveTo(0,this.#k),t.lineTo(-6,this.#k-6),t.stroke(),t}},Text:class extends p{#E;#N;#S;#$="sans-serif";#z="start";#B="middle";#U;constructor(t,e){super(e),this.#E=t,void 0===e.size?this.#N=10:this.#N=e.size,void 0===e.color?this.#S="white":this.#S=e.color,void 0!==e.fontFamily&&(this.fontFamily=e.fontFamily),void 0!==e.align&&(this.#z=e.align),void 0!==e.baseline&&(this.#B=e.baseline),this.#U=e.hollow??!1}onDraw(t){return super.onDraw(t),t.font=`${this.#N}px ${this.#$}`,t.textAlign=this.#z,t.textBaseline=this.#B,this.#U?this.#U&&(t.strokeStyle=this.#S,t.strokeText(this.#E,0,0)):(t.fillStyle=this.#S,t.fillText(this.#E,0,0)),t}get color(){return this.#S}set color(t){this.#S=t}get fontFamily(){return this.#$}set fontFamily(t){this.#$=t}get align(){return this.#z}set align(t){this.#z=t}get baseline(){return this.#B}set baseline(t){this.#B=t}get text(){return this.#E}set text(t){this.#E=t}get size(){return this.#N}set size(t){this.#N=t}},Point:class extends p{constructor(t){super(t),this.x=t.x,this.y=t.y}onDraw(t){return super.onDraw(t),t}},Line:class extends p{#Q;#R;color="white";width=1;constructor(t){super(t),this.#Q=t.startPoint,this.#R=t.endPoint,void 0!==t.color&&(this.color=t.color),void 0!==t.width&&(this.width=t.width)}onDraw(t){return super.onDraw(t),t.beginPath(),t.strokeStyle=`${this.color}`,t.lineWidth=this.width,t.moveTo(this.primaryPoints[0].x,this.primaryPoints[0].y),t.lineTo(this.primaryPoints[1].x,this.primaryPoints[1].y),t.stroke(),t}get primaryPoints(){return[this.#Q,this.#R]}get startX(){return this.#Q.x}set startX(t){this.#Q.x=t}get startY(){return this.#Q.y}set startY(t){this.#Q.y=t}get endX(){return this.#R.x}set endX(t){this.#R.x=t}get endY(){return this.#R.y}set endY(t){this.#R.y=t}},MathImage:class extends p{#q;#G;#H;#S="white";constructor(t){super(t),this.#q=t.f,this.#G=t.start,this.#H=t.end,void 0!==t.color&&(this.#S=t.color)}onDraw(t){super.onDraw(t),t.fillStyle=this.#S,t.beginPath(),t.moveTo(this.#G,this.#q(this.#G));let e=this.#G;for(;e<=this.#H;e+=1)t.lineTo(e,this.#q(e));return t.stroke(),t}get startVariable(){return this.#G}set startVariable(t){this.#G=t}get endVariable(){return this.#H}set endVariable(t){this.#H=t}get color(){return this.#S}set color(t){this.#S=t}},Circle:class extends p{#J;#K;borderColor="white";borderWidth=1;fillColor=null;constructor(t,e){super(e),this.radius=t,this.x=e.x,this.y=e.y,void 0===e.startAngle?this.#J=0:this.#J=e.startAngle,void 0===e.endAngle?this.#K=2*Math.PI:this.#K=e.startAngle,void 0!==e.borderColor&&(this.borderColor=e.borderColor),void 0!==e.borderWidth&&(this.borderWidth=e.borderWidth),void 0!==e.fillColor&&(this.fillColor=e.fillColor)}onDraw(t){return super.onDraw(t),t.lineWidth=this.borderWidth,t.moveTo(this.contextX,this.contextY),t.beginPath(),t.arc(0,0,this.radius,this.#J,this.#K),null!==this.fillColor&&(t.fillStyle=this.fillColor,t.fill()),t.strokeStyle=this.borderColor,t.stroke(),t}get startAngle(){return this.#J}set startAngle(t){this.#J=t}get endAngle(){return this.#K}set endAngle(t){this.#K=t}},Polygon:class extends p{points=[];borderColor="white";borderWidth=1;fillColor=null;constructor(t){super(t),this.points=t.points,void 0!==t.borderColor&&(this.borderColor=t.borderColor),void 0!==t.fillColor&&(this.fillColor=t.fillColor),void 0!==t.borderWidth&&(this.borderWidth=t.borderWidth)}onDraw(t){t.lineWidth=this.borderWidth,t.strokeStyle=`${this.borderColor}`,null!==this.fillColor&&(t.fillStyle=`${this.fillColor}`,t.fill()),t.moveTo(this.points[0].x,this.points[0].y),t.beginPath();for(const e of this.points)t.lineTo(e.x,e.y);return t.lineTo(this.points[0].x,this.points[0].y),t.stroke(),t}},Rectangle:class extends p{constructor(t){super(t),this.length=t.length,this.width=t.length,this.borderColor=t.borderColor??"white",this.borderWidth=t.borderWidth??1,this.fillColor=t.fillColor??null}onDraw(t,e){return t.lineWidth=this.borderWidth,t.strokeStyle=`${this.borderColor}`,null!==this.fillColor&&(t.fillStyle=`${this.fillColor}`,t.fill()),t.beginPath(),t.moveTo(0,0),t.lineTo(this.length,0),t.lineTo(this.length,this.width),t.lineTo(0,this.width),t.lineTo(0,0-.5*this.borderWidth),t.stroke(),t}},Image:class extends p{#Z;constructor(t,e){super(e),this.#Z=t}onDraw(t,e){return t.drawImage(this.#Z,this.x,this.y),t}}};var m,f,x;return m=new WeakMap,f=new WeakMap,x=new WeakMap,window.onload=()=>{console.log("   ____  ___ _      ___________ ______\n  / __ \\/ _ \\ | /| / / ___/ __  / ___/\n / / / /  __/ |/ |/ / /__/ /_/ / /    \n/_/ /_/\\___/|__/|__/\\___/\\__,_/_/\n\n%cThe animation is powered by %c newcar %c v0.3.2  %c\n\nlink: https://github.com/Bug-Duck/newcar\n\nClick here to jump to our Twitter: https://twitter.com/bugduckteam\n ","font-size: 14px","background-color: orange; padding: 7px; font-size: 14px","background-color: grey; padding: 7px; font-size: 14px")},t.AudioItem=class{#tt=null;#et=null;#it;#st=1;constructor(t,e,i){this.#tt=t,this.#et=e,this.#it=new Audio(this.#tt),this.#st=i,this.#it.volume=this.#st}get path(){return this.#tt}get startFrame(){return this.#et}get audio(){return this.#it}},t.Car=class{constructor(t,e){return m.set(this,new i),f.set(this,new o),x.set(this,void 0),function(t,e,i,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===s?o.call(t,i):o?o.value=i:e.set(t,i)}(this,x,new s(t,e),"f"),this}addObject(t){return e(this,x,"f").linkObject(t),this}addAnimationItem(t){return e(this,m,"f").addItem(t),this}animate(t){return e(this,m,"f").animate(t),this}addAudioItem(t){return e(this,f,"f").addAudio(t),this}allowAudio(){e(this,f,"f").allow()}banAudio(){e(this,f,"f").ban()}play(){e(this,m,"f").playOnCar(e(this,x,"f")),e(this,f,"f").playOnCar(e(this,x,"f")),e(this,x,"f").CountFrame()}exports(t,i,s){((t,e,i,s)=>{const o=r(t.element,{minmeType:"video/webm"});a(o,s),n(o,t,e,i)})(e(this,x,"f"),t,i,s)}onUpdate(t){e(this,x,"f").onUpdate(t)}pause(t){e(this,x,"f").pause(t)}continue(t){e(this,x,"f").continue(t)}},t.animation=g,t.interpolator=d,t.object=b,t}({});
//# sourceMappingURL=newcar.min.js.map
